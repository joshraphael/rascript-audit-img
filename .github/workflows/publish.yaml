name: Create and publish a Docker image

on:
  push:
    branches:
      - '*'
      - '!main'

jobs:
  build-and-push-image:
    uses: ./.github/workflows/reusable-publish.yaml
    with:
        tag: ${{ github.sha }}